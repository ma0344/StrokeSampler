<Page x:Class="StrokeSampler.MainPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:StrokeSampler"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      mc:Ignorable="d"
      x:Name="thisPage"
      d:Width="2100"
      Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
      >

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <CommandBar Grid.Row="0"
                    Grid.Column="0">
            <AppBarButton x:Name="GenerateButton"
                          Icon="Edit"
                          Label="生成"
                          Click="GenerateButton_Click" />
            <AppBarButton x:Name="ClearButton"
                          Icon="Delete"
                          Label="クリア"
                          Click="ClearButton_Click" />

            <AppBarSeparator />
            <AppBarButton x:Name="DrawS200StrokeButton"
                          Icon="Edit"
                          Label="S200 Stroke"
                          Click="DrawS200StrokeButton_Click" />
            <AppBarButton x:Name="DrawS200StrokeVerticalButton"
                          Icon="Edit"
                          Label="S200 Stroke (V)"
                          Click="DrawS200StrokeVerticalButton_Click" />
            <AppBarSeparator />
            <AppBarButton x:Name="ExportMaterialButton"
                          Icon="Save"
                          Label="素材用PNG（透過）"
                          Click="ExportMaterialButton_Click" />
            <AppBarButton x:Name="ExportPreviewButton"
                          Icon="Save"
                          Label="確認用PNG（白+ラベル）"
                          Click="ExportPreviewButton_Click" />

            <AppBarSeparator />
            <AppBarButton x:Name="EstimateTilePeriodButton"
                          Icon="Find"
                          Label="Tile周期推定"
                          Click="EstimateTilePeriodButton_Click" />

            <AppBarSeparator />
            <AppBarButton x:Name="ExportRadialFalloffHiResFromPngButton"
                          Icon="Save"
                          Label="HiRes Falloff CSV"
                          Click="ExportRadialFalloffHiResFromPngButton_Click" />
        </CommandBar>
        <Grid Grid.Row="1"
              Grid.Column="0"
              HorizontalAlignment="Stretch">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <ScrollViewer 
                          x:Name="InkScrollViewer"
                          Grid.Column="0"
                          ZoomMode="Enabled"
                          MinZoomFactor="1"
                          MaxZoomFactor="255"
                          ViewChanged="InkScrollViewer_ViewChanged"
                          VerticalScrollBarVisibility="Visible"
                          HorizontalScrollBarVisibility="Visible"
                          Margin="0">
            
                <Grid Background="White">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <InkToolbar x:Name="InkToolbar"
                                x:FieldModifier="Public"
                                Grid.Row="0"
                                TargetInkCanvas="{x:Bind InkCanvasControl}"
                                Grid.ColumnSpan="2"
                                VerticalAlignment="Stretch"/>
                    <InkCanvas x:Name="InkCanvasControl"
                               x:FieldModifier="Public"
                               Grid.Row="1"
                               Grid.ColumnSpan="2" 
                               VerticalAlignment="Stretch"/>
                </Grid>
            </ScrollViewer>
            
         </Grid>
        <StackPanel Grid.Row="2"
                    Grid.Column="0"
                    Orientation="Vertical"
                    VerticalAlignment="Bottom">
            <StackPanel Orientation="Horizontal"
                        Padding="12"
                        Spacing="12">
            <TextBlock Text="Zoom:" VerticalAlignment="Center" />
            <TextBlock x:Name="ZoomFactorTextBlock" Text="1.00" VerticalAlignment="Center" />

            <TextBlock Text="SetZoom:" VerticalAlignment="Center" />
            <TextBox x:Name="ZoomFactorInputTextBox" Width="80" Text="1.0" />
            <Button x:Name="ApplyZoomButton" Content="Apply" Click="ApplyZoomButton_Click" />

            <TextBlock Text="ExportScale:" VerticalAlignment="Center" />
                <TextBox x:Name="ExportScaleTextBox"
                         Width="60"
                         Text="2"
                         x:FieldModifier="Public" />
            <TextBlock Text="ExportDpi:" VerticalAlignment="Center" />
                <TextBox x:Name="ExportDpiTextBox"
                         Width="70"
                         Text="96"
                         x:FieldModifier="Public" />
            <TextBlock Text="Start(X,Y):" VerticalAlignment="Center" />
            <TextBox x:Name="StartPositionTextBox" Width="110" Text="260,440" />
            <TextBlock Text="End(X,Y):" VerticalAlignment="Center" />
            <TextBox x:Name="EndPositionTextBox" Width="110" Text="1260,440" />
            <TextBlock Text="StairDY:" VerticalAlignment="Center" />
            <TextBox x:Name="StairDyTextBox" Width="60" Text="2" />
            <TextBlock Text="StairCount:" VerticalAlignment="Center" />
            <TextBox x:Name="StairCountTextBox" Width="60" Text="20" />
            <Button x:Name="DrawStairLinesButton" Content="Draw Stair Lines" Click="DrawStairLinesButton_Click" />
            <TextBlock Text="S200Mode:" VerticalAlignment="Center" />
            <ComboBox x:Name="S200StrokeModeComboBox" Width="140" SelectedIndex="0">
                <ComboBoxItem Content="2 points" />
                <ComboBoxItem Content="step=4" />
            </ComboBox>
            </StackPanel>
            <StackPanel Orientation="Horizontal"
                        Padding="12"
                        Spacing="12">

                <TextBlock Text="TileSize:" VerticalAlignment="Center" />
            <TextBox x:Name="TileSizeTextBox" Width="70" Text="348" />
            <TextBlock Text="TileOffset(X,Y):" VerticalAlignment="Center" />
            <TextBox x:Name="TileOffsetTextBox" Width="110" Text="0,0" />
            <CheckBox x:Name="AutoTileOffsetCheckBox" Content="AutoOffset" IsChecked="True" VerticalAlignment="Center" />
            <CheckBox x:Name="FlattenTileCheckBox" Content="Flatten" IsChecked="True" VerticalAlignment="Center" />
            <TextBlock Text="FlattenRadius:" VerticalAlignment="Center" />
            <TextBox x:Name="FlattenRadiusTextBox" Width="60" Text="32" />
            <Button x:Name="ExportAveragedTileButton" Content="Export Avg Tile" Click="ExportAveragedTileButton_Click" />
            <Button x:Name="ExportAveragedTileTransparentButton" Content="Export Avg Tile (Transparent)" Click="ExportAveragedTileTransparentButton_Click" />

            <TextBlock Text="PeriodAxis:" VerticalAlignment="Center" />
            <ComboBox x:Name="TilePeriodAxisComboBox" Width="80" SelectedIndex="0">
                <ComboBoxItem Content="X" />
                <ComboBoxItem Content="Y" />
            </ComboBox>
            <TextBlock Text="出力幅:"
                       VerticalAlignment="Center" />
            <TextBox x:Name="ExportWidthTextBox"
                     x:FieldModifier="Public"
                     Width="100"
                     Text="4096"
                     IsReadOnly="False" />

            <TextBlock Text="出力高:"
                       VerticalAlignment="Center" />
            <TextBox x:Name="ExportHeightTextBox"
                         x:FieldModifier="Public"
                         Width="100"
                     Text="4096"
                     IsReadOnly="False" />

            </StackPanel>
            <StackPanel Orientation="Horizontal"
                        Padding="12"
                        Spacing="12">
                <Button x:Name="ExportHighResPngButton" Content="Export HiRes PNG" Click="ExportHighResPngButton_Click" />
            <Button x:Name="ExportHighResPngTransparentButton" Content="Export HiRes PNG (Transparent)" Click="ExportHighResPngTransparentButton_Click" />
            <Button x:Name="ExportHighResPngCroppedButton" Content="Export HiRes PNG (Cropped)" Click="ExportHighResPngCroppedButton_Click" />
            <Button x:Name="ExportHighResPngCroppedTransparentButton" Content="Export HiRes PNG (Cropped+Transparent)" Click="ExportHighResPngCroppedTransparentButton_Click" />
            </StackPanel>
            <StackPanel Orientation="Horizontal"
                        Padding="12"
                        Spacing="12">
                <Button x:Name="ExportHiResLastStrokeCroppedTransparentButton" Content="Export HiRes LastStroke (Cropped+Transparent)" Click="ExportHiResLastStrokeCroppedTransparentButton_Click" />
             <Button x:Name="ExportHiResPreSaveAlphaStatsCanvasButton" Content="Export HiRes PreSave α Stats (Canvas)" Click="ExportHiResPreSaveAlphaStatsCanvasButton_Click" />
             <Button x:Name="ExportHiResPreSaveAlphaStatsLastStrokeButton" Content="Export HiRes PreSave α Stats (LastStroke)" Click="ExportHiResPreSaveAlphaStatsLastStrokeButton_Click" />
             <Button x:Name="ExportHiResSimulatedCompositeButton" Content="Export HiRes Simulated Composite (SO/Add/Max)" Click="ExportHiResSimulatedCompositeButton_Click" />

            <Button x:Name="DrawDotButton" Content="Draw Dot" Click="DrawDotButton_Click" />

            <TextBlock Text="TilePeriod:" VerticalAlignment="Center" />
            <TextBlock x:Name="TilePeriodTextBlock" Text="(n/a)" VerticalAlignment="Center" />


            <TextBlock Text="Pressure段階:"
                       VerticalAlignment="Center" />
            <TextBlock Text="0.2 / 0.5 / 0.8 / 1.0"
                       VerticalAlignment="Center" />

            <TextBlock Text="Stroke幅:"
                       VerticalAlignment="Center" />
            <TextBlock Text="InkToolbarの選択値"
                       VerticalAlignment="Center" />

            <AppBarSeparator />
            </StackPanel>
            <StackPanel Orientation="Horizontal"
                        Padding="12"
                        Spacing="12">

                <TextBlock Text="重ね塗りPressure:"
                       VerticalAlignment="Center" />
            <TextBox x:Name="OverwritePressureNumberBox"
                         x:FieldModifier="Public"
                         Width="80"
                     Text="0.5"
                     IsReadOnly="False" />

            <TextBlock Text="Max Overwrite:"
                       VerticalAlignment="Center" />
            <TextBox x:Name="MaxOverwriteTextBox"
                         x:FieldModifier="Public"
                         Width="80"
                     Text="10"
                     IsReadOnly="False" />

            <Button x:Name="GenerateOverwriteSamplesButton"
                    Content="重ね塗り生成"
                    Click="GenerateOverwriteSamplesButton_Click" />

            <AppBarSeparator />

                <TextBlock Text="Dot間隔:"
                           VerticalAlignment="Center" />
                <TextBox x:Name="DotGridSpacingTextBox"
                         x:FieldModifier="Public"
                         Width="80"
                         Text="120"
                         IsReadOnly="False" />

                <Button x:Name="GenerateDotGridButton"
                        Content="Dotグリッド生成"
                        Click="GenerateDotGridButton_Click" />

                <Button x:Name="GenerateDotGridFixedConditionButton"
                        Content="Dotグリッド(同条件)"
                        Click="GenerateDotGridFixedConditionButton_Click" />
                <AppBarSeparator />

                <TextBlock Text="半径bin(px):"
                           VerticalAlignment="Center" />
                <TextBox x:Name="RadialBinSizeTextBox"
                         x:FieldModifier="Public"
                         Width="60"
                         Text="1"
                         IsReadOnly="False" />

                <Button x:Name="ExportRadialAlphaCsvButton"
                        Content="半径αCSV"
                        Click="ExportRadialAlphaCsvButton_Click" />

                <AppBarSeparator />

            </StackPanel>
            <StackPanel Orientation="Horizontal"
                        Padding="12"
                        Spacing="12">
                <TextBlock Text="Dot512 Pressure:"
                           VerticalAlignment="Center" />
                <TextBox x:Name="Dot512PressureNumberBox"
                         x:FieldModifier="Public"
                         Width="80"
                         Text="1.0"
                         IsReadOnly="False" />

                <TextBlock Text="Dot512 N:"
                           VerticalAlignment="Center" />
                <TextBox x:Name="Dot512OverwriteTextBox"
                         x:FieldModifier="Public"
                         Width="70"
                         Text="1"
                         IsReadOnly="False" />

                <TextBlock Text="Dot512 P一覧:"
                           VerticalAlignment="Center" />
                <TextBox x:Name="Dot512BatchPsTextBox"
                         x:FieldModifier="Public"
                         Width="200"
                         Text="0.05,0.1,0.5,1.0"
                         IsReadOnly="False" />

                <TextBlock Text="Dot512 N一覧:"
                           VerticalAlignment="Center" />
                <TextBox x:Name="Dot512BatchNsTextBox"
                         x:FieldModifier="Public"
                         Width="140"
                         Text="1,10,100"
                         IsReadOnly="False" />

                <TextBlock Text="Dot512 Size:"
                           VerticalAlignment="Center" />
                <TextBox x:Name="Dot512SizeTextBox"
                         x:FieldModifier="Public"
                         Width="70"
                         Text=""
                         PlaceholderText="(tool)"
                         IsReadOnly="False" />

                <Button x:Name="ExportDot512MaterialButton"
                        Content="Dot512(透過)"
                        Click="ExportDot512MaterialButton_Click" />

                <Button x:Name="ExportDot512PreviewButton"
                        Content="Dot512(白+ラベル)"
                        Click="ExportDot512PreviewButton_Click" />

                <Button x:Name="ExportDot512BatchMaterialSizesPsNsButton"
                        Content="Dot512一括S×P×N(透過)"
                        Click="ExportDot512BatchMaterialSizesPsNsButton_Click" />

                <AppBarSeparator />
            </StackPanel>
            <StackPanel Orientation="Horizontal"
                        Padding="12"
                        Spacing="12">

                <TextBlock Text="Dot512 枚数:"
                           VerticalAlignment="Center" />
                <TextBox x:Name="Dot512BatchCountTextBox"
                         x:FieldModifier="Public"
                         Width="70"
                         Text="30"
                         IsReadOnly="False" />

                <TextBlock Text="Dot512 Prefix:"
                           VerticalAlignment="Center" />
                <TextBox x:Name="Dot512BatchPrefixTextBox"
                         x:FieldModifier="Public"
                         Width="160"
                         Text="dot512"
                         IsReadOnly="False" />

                <TextBlock Text="Jitter±px:"
                           VerticalAlignment="Center" />
                <TextBox x:Name="Dot512BatchJitterTextBox"
                         x:FieldModifier="Public"
                         Width="70"
                         Text="0.5"
                          IsReadOnly="False" />

                <TextBlock Text="Sizes:"
                           VerticalAlignment="Center" />
                <TextBox x:Name="Dot512BatchSizesTextBox"
                         x:FieldModifier="Public"
                         Width="160"
                         Text="24,48,96"
                         IsReadOnly="False" />

                <TextBlock Text="Step(px):"
                           VerticalAlignment="Center" />
                <TextBox x:Name="Dot512SlideStepTextBox"
                         x:FieldModifier="Public"
                         Width="70"
                         Text="1.0"
                         IsReadOnly="False" />

                <TextBlock Text="Frames:"
                           VerticalAlignment="Center" />
                <TextBox x:Name="Dot512SlideFramesTextBox"
                         x:FieldModifier="Public"
                         Width="70"
                         Text="16"
                         IsReadOnly="False" />

            </StackPanel>
            <StackPanel Orientation="Horizontal"
                        Padding="12"
                        Spacing="12">

                <Button x:Name="ExportDot512BatchMaterialButton"
                        Content="Dot512一括(透過)"
                        Click="ExportDot512BatchMaterialButton_Click" />

                <Button x:Name="ExportDot512BatchPreviewButton"
                        Content="Dot512一括(白)"
                        Click="ExportDot512BatchPreviewButton_Click" />

                <Button x:Name="ExportDot512BatchMaterialSizesButton"
                        Content="Dot512一括S(透過)"
                        Click="ExportDot512BatchMaterialSizesButton_Click" />

                <Button x:Name="ExportDot512BatchPreviewSizesButton"
                        Content="Dot512一括S(白)"
                        Click="ExportDot512BatchPreviewSizesButton_Click" />
                <AppBarSeparator />

                <Button x:Name="ExportDot512SlideMaterialButton"
                        Content="Dot512Slide(透過)"
                        Click="ExportDot512SlideMaterialButton_Click" />

                <Button x:Name="ExportDot512SlidePreviewButton"
                        Content="Dot512Slide(白)"
                        Click="ExportDot512SlidePreviewButton_Click" />

                <AppBarSeparator />

                <Button x:Name="ExportEstimatedPaperNoiseButton"
                        Content="紙目推定PNG"
                        Click="ExportEstimatedPaperNoiseButton_Click" />

                <Button x:Name="ExportS200LineMaterialButton"
                        Content="S200線(透過)"
                        Click="ExportS200LineMaterialButton_Click" />

                <Button x:Name="ExportS200LinePreviewButton"
                        Content="S200線(白)"
                        Click="ExportS200LinePreviewButton_Click" />

                <Button x:Name="ExportDot512PreSaveAlphaSummaryButton"
                        Content="保存前αCSV"
                        Click="ExportDot512PreSaveAlphaSummaryButton_Click" />

                <Button x:Name="ExportDot512PreSaveAlphaFloorBySizeButton"
                        Content="床CSV(S別)"
                        Click="ExportDot512PreSaveAlphaFloorBySizeButton_Click" />

                <AppBarSeparator />
            </StackPanel>
            <StackPanel Orientation="Horizontal"
                        Padding="12"
                        Spacing="12">

                <TextBlock Text="Crop dx:"
                           VerticalAlignment="Center" />
                <TextBox x:Name="PaperNoiseCropDxTextBox"
                         x:FieldModifier="Public"
                         Width="70"
                         Text="32"
                         IsReadOnly="False" />

                <TextBlock Text="dy:"
                           VerticalAlignment="Center" />
                <TextBox x:Name="PaperNoiseCropDyTextBox"
                         x:FieldModifier="Public"
                         Width="70"
                         Text="0"
                         IsReadOnly="False" />

                <Button x:Name="ExportPaperNoiseCrop24Button"
                        Content="紙目24x24切抜"
                        Click="ExportPaperNoiseCrop24Button_Click" />

                <Button x:Name="ComparePaperNoiseModelsButton"
                        Content="紙目モデル比較"
                        Click="ComparePaperNoiseModelsButton_Click" />

                <Button x:Name="ExportRadialFalloffCsvButton"
                        Content="距離減衰CSV"
                        Click="ExportRadialFalloffCsvButton_Click" />

                <AppBarSeparator />


                <TextBlock Text="F(r)一括 Sizes(&lt;=200):"
                           VerticalAlignment="Center" />
                <TextBox x:Name="RadialFalloffBatchSizesTextBox"
                         x:FieldModifier="Public"
                         Width="180"
                         Text="50,100,150,200"
                         IsReadOnly="False" />
                <Button x:Name="ExportRadialFalloffBatchButton"
                        Content="距離減衰CSV一括"
                        Click="ExportRadialFalloffBatchButton_Click" />

                <AppBarSeparator />

                <TextBlock Text="正規化基準 S0(px):"
                           VerticalAlignment="Center" />
                <TextBox x:Name="NormalizedFalloffS0TextBox"
                         x:FieldModifier="Public"
                         Width="70"
                         Text="200"
                         IsReadOnly="False" />
                <Button x:Name="ExportNormalizedFalloffButton"
                        Content="正規化mean/stddev"
                        Click="ExportNormalizedFalloffButton_Click" />



                <TextBlock Text="N一覧:"
                           VerticalAlignment="Center" />
                <TextBox x:Name="RadialFalloffBatchNsTextBox"
                         x:FieldModifier="Public"
                         Width="140"
                         Text="1,2,3,5,10"
                         IsReadOnly="False" />
                <Button x:Name="ExportRadialFalloffBatchSizesNsButton"
                        Content="距離減衰CSV一括(S×N)"
                        Click="ExportRadialFalloffBatchSizesNsButton_Click" />

                <AppBarSeparator />
        </StackPanel>
        <StackPanel Orientation="Horizontal"
                    Padding="12"
                    Spacing="12">

                <TextBlock Text="P一覧:"
                           VerticalAlignment="Center" />
                <TextBox x:Name="RadialFalloffBatchPsTextBox"
                         x:FieldModifier="Public"
                         Width="260"
                         Text="0.05,0.1,0.25,0.5,0.65,0.77,0.85,1.0"
                         IsReadOnly="False" />
                <Button x:Name="ExportRadialFalloffBatchPsSizesNsButton"
                        Content="距離減衰CSV一括(P×S×N)"
                        Click="ExportRadialFalloffBatchPsSizesNsButton_Click" />

                <Button x:Name="ExportCenterAlphaSummaryButton"
                        Content="中心αサマリCSV"
                        Click="ExportCenterAlphaSummaryButton_Click" />

                <TextBlock Text="半径一覧:"
                           VerticalAlignment="Center" />
                <TextBox x:Name="RadialSampleRsTextBox"
                         x:FieldModifier="Public"
                         Width="220"
                         Text="0,1,2,5,10,20,50,100"
                         IsReadOnly="False" />
                <Button x:Name="ExportRadialSamplesSummaryButton"
                        Content="半径別サマリCSV"
                        Click="ExportRadialSamplesSummaryButton_Click" />

                <Button x:Name="CompareDot512WithSkiaButton"
                        Content="dot512比較(UWP vs Skia)"
                        Click="CompareDot512WithSkiaButton_Click" />

                <AppBarSeparator />

            </StackPanel>
        </StackPanel>
        <StackPanel Orientation="Horizontal"
                    Padding="12"
                    Spacing="12">
        </StackPanel>
    </Grid>
</Page>
