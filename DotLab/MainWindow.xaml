<Window x:Class="DotLab.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:skia="clr-namespace:SkiaSharp.Views.WPF;assembly=SkiaSharp.Views.WPF"
        mc:Ignorable="d"
        xmlns:ui="http://schemas.modernwpf.com/2019"
        ui:WindowHelper.UseModernWindowStyle="True"
        Title="DotLab" Height="860" Width="1400">
    <Grid Margin="12">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="380" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <TextBlock Text="DotLab" FontSize="20" FontWeight="SemiBold" Margin="0,0,0,12" />

                <TextBlock Text="Noise (alpha as height)" FontWeight="SemiBold" Margin="0,0,0,6" />
                <TextBlock Text="NoisePath" />
                <TextBox x:Name="NoisePathTextBox" Text="Sample/NoiseSheet-WhiteBack2-Transparent.png" />
                
                <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                    <StackPanel Width="120">
                        <TextBlock Text="NoiseScale" />
                        <ui:NumberBox x:Name="NoiseScaleNumberBox"
                                      Text="0.125"
                                      Value="0.125"
                                      SmallChange="0.125"
                                      LargeChange="0.5"
                                      SpinButtonPlacementMode="Inline"
                                      ValueChanged="Property_Changed" />
                    </StackPanel>
                    <StackPanel Width="120" Margin="8,0,0,0">
                        <TextBlock Text="OffsetX" />
                        <ui:NumberBox x:Name="NoiseOffsetXNumberBox"
                                      Text="0"
                                      Value="0"
                                      SmallChange="1"
                                      LargeChange="5"
                                      SpinButtonPlacementMode="Inline"
                                      ValueChanged="Property_Changed" />
                    </StackPanel>
                    <StackPanel Width="120" Margin="8,0,0,0">
                        <TextBlock Text="OffsetY" />
                        <ui:NumberBox x:Name="NoiseOffsetYNumberBox"
                                      Value="0"
                                      SpinButtonPlacementMode="Inline" />
                    </StackPanel>
                </StackPanel>

                <Separator Margin="0,12,0,12" />

                <TextBlock Text="Dot" FontWeight="SemiBold" Margin="0,0,0,6" />

                <StackPanel Orientation="Horizontal">
                    <StackPanel Width="120">
                        <TextBlock Text="S (diameter px)" />
                        <ui:NumberBox x:Name="DiameterNumberBox"
                                      Text="200"
                                      Value="200"
                                      SmallChange="1"
                                      LargeChange="5"
                                      SpinButtonPlacementMode="Inline"
                                      ValueChanged="Property_Changed" />
                    </StackPanel>
                    <StackPanel Width="120" Margin="8,0,0,0">
                        <TextBlock Text="P" />
                        <ui:NumberBox x:Name="PressureNumberBox"
                                      Text="1"
                                      Value="1"
                                      Maximum="1.0"
                                      SmallChange="0.01"
                                      LargeChange="0.1"
                                      SpinButtonPlacementMode="Inline"
                                      ValueChanged="Property_Changed" />
                    </StackPanel>
                    <StackPanel Width="120" Margin="8,0,0,0">
                        <TextBlock Text="N" />
                        <ui:NumberBox x:Name="StampCountNumberBox"
                                      Text="1"
                                      Value="1"
                                      SmallChange="1"
                                      LargeChange="5"
                                      SpinButtonPlacementMode="Inline"
                                      ValueChanged="Property_Changed" />
                    </StackPanel>
                </StackPanel>

                <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                    <StackPanel Width="120">
                        <TextBlock Text="k (softness)" />
                        <ui:NumberBox x:Name="SoftnessKNumberBox"
                                      Text="0.15"
                                      Value="0.15"
                                      Minimum="0.001"
                                      SmallChange="0.01"
                                      LargeChange="0.1"
                                      SpinButtonPlacementMode="Inline"
                                      ValueChanged="Property_Changed" />
                    </StackPanel>
                    <StackPanel Width="120" Margin="8,0,0,0">
                        <TextBlock Text="CanvasSize" />
                        <ui:NumberBox x:Name="CanvasSizeNumberBox"
                                      Text="512"
                                      Value="512"
                                      SmallChange="8"
                                      LargeChange="64"
                                      SpinButtonPlacementMode="Inline"
                                      ValueChanged="Property_Changed" />
                    </StackPanel>
                </StackPanel>

                <TextBlock Text="f(r)" FontWeight="SemiBold" Margin="0,12,0,6" />
                <ComboBox x:Name="FalloffModeComboBox" SelectedIndex="0">
                    <ComboBoxItem Content="IdealCircle (use LUT if available)" />
                    <ComboBoxItem Content="Flat (f=1)" />
                    <ComboBoxItem Content="CSV(LUT)" />
                </ComboBox>

                <TextBlock Text="Preview" FontWeight="SemiBold" Margin="0,12,0,6" />
                <ComboBox x:Name="PreviewModeComboBox" SelectedIndex="0">
                    <ComboBoxItem Content="outA" />
                    <ComboBoxItem Content="V" />
                    <ComboBoxItem Content="B=P*f(r)" />
                    <ComboBoxItem Content="D=B-wall" />
                    <ComboBoxItem Content="R=(B-wall)/k (raw)" />
                    <ComboBoxItem Content="H=noiseHeight" />
                    <ComboBoxItem Content="wall=1-H" />
                </ComboBox>

                <Button x:Name="RenderButton" Content="Render" Margin="0,12,0,0" Click="RenderButton_Click" />
            </StackPanel>
        </ScrollViewer>

        <Border Grid.Column="1" BorderBrush="#33000000" BorderThickness="1" CornerRadius="4" Margin="12,0,0,0">
            <skia:SKElement x:Name="Preview" PaintSurface="Preview_PaintSurface" />
        </Border>
    </Grid>
</Window>
